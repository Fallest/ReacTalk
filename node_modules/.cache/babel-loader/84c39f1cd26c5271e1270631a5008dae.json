{"ast":null,"code":"import * as fs from 'fs';\n/**\n * Clase para leer y escribir datos en los archivos de usuario.\n */\n\nexport default class DataManager {\n  /**\n   * Busca en el archivo un nombre de usuario concreto\n   * @param userName Nombre de usuario a encontrar\n   */\n\n  /**\n   * Comprueba que una pareja de datos usuario-contrase침a exista\n   * y sea v치lida.\n   * @param user \n   * @param pwd \n   */\n  static checkCredentials(user, pwd) {\n    let valid = false;\n    this.data.forEach(u => {\n      if (u[0].toLowerCase() === user.toLowerCase() && u[1] === pwd) {\n        valid = true;\n        return;\n      }\n    });\n    return valid;\n  }\n  /**\n   * Devuelve un array con todos los amigos y sus estados.\n   * \n   * @param userName \n   */\n\n\n  static getFriends(userName) {\n    return this.data.map(user => {\n      // Si encontramos el usuario\n      if (user[0] === userName) {\n        // Extraemos sus amigos\n        let friends = Array(0);\n        user[3].split(',').map(friend => {\n          this.data.map(u => {\n            if (u[0].toLowerCase() === friend) {\n              friends.push({\n                name: friend,\n                status: u[2]\n              });\n              return;\n            }\n          });\n        });\n        return friends;\n      }\n    }).filter(e => {\n      return e != null;\n    })[0];\n  }\n  /**\n   * Carga todos los datos disponibles\n   */\n\n\n  static loadAll() {\n    let temp = new Array(0);\n    fs.readFileSync('../data/users.txt', 'utf-8').split(\"\\n\").map(line => {\n      temp.push(line.split(\";\"));\n    });\n    return temp;\n  }\n\n}\nDataManager.data = DataManager.loadAll();","map":{"version":3,"sources":["/home/david-bernal/Documentos/LearningTypescript/ReactApps/conversations/src/components/DataManager.tsx"],"names":["fs","DataManager","checkCredentials","user","pwd","valid","data","forEach","u","toLowerCase","getFriends","userName","map","friends","Array","split","friend","push","name","status","filter","e","loadAll","temp","readFileSync","line"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AAEA;AACA;AACA;;AACA,eAAe,MAAMC,WAAN,CAAkB;AAC7B;AACJ;AACA;AACA;;AAII;AACJ;AACA;AACA;AACA;AACA;AAC2B,SAAhBC,gBAAgB,CAACC,IAAD,EAAeC,GAAf,EAA4B;AAC/C,QAAIC,KAAK,GAAG,KAAZ;AAEA,SAAKC,IAAL,CAAUC,OAAV,CAAkBC,CAAC,IAAI;AACnB,UAAIA,CAAC,CAAC,CAAD,CAAD,CAAKC,WAAL,OAAuBN,IAAI,CAACM,WAAL,EAAvB,IACJD,CAAC,CAAC,CAAD,CAAD,KAASJ,GADT,EACc;AACVC,QAAAA,KAAK,GAAG,IAAR;AACA;AACH;AACJ,KAND;AAQA,WAAOA,KAAP;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACqB,SAAVK,UAAU,CAACC,QAAD,EAAmB;AAChC,WAAO,KAAKL,IAAL,CAAUM,GAAV,CAAcT,IAAI,IAAI;AACzB;AACA,UAAIA,IAAI,CAAC,CAAD,CAAJ,KAAYQ,QAAhB,EAA0B;AACtB;AACA,YAAIE,OAAO,GAAGC,KAAK,CAAC,CAAD,CAAnB;AACAX,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQY,KAAR,CAAc,GAAd,EAAmBH,GAAnB,CAAwBI,MAAM,IAAI;AAC9B,eAAKV,IAAL,CAAUM,GAAV,CAAcJ,CAAC,IAAI;AACf,gBAAIA,CAAC,CAAC,CAAD,CAAD,CAAKC,WAAL,OAAuBO,MAA3B,EAAmC;AAC/BH,cAAAA,OAAO,CAACI,IAAR,CAAa;AAACC,gBAAAA,IAAI,EAAEF,MAAP;AAAeG,gBAAAA,MAAM,EAAEX,CAAC,CAAC,CAAD;AAAxB,eAAb;AACA;AACH;AACJ,WALD;AAMH,SAPD;AAQA,eAAOK,OAAP;AACH;AACJ,KAfM,EAeJO,MAfI,CAeGC,CAAC,IAAI;AACX,aAAOA,CAAC,IAAI,IAAZ;AACH,KAjBM,EAiBJ,CAjBI,CAAP;AAkBH;AAED;AACJ;AACA;;;AACkB,SAAPC,OAAO,GAAG;AACb,QAAIC,IAAI,GAAG,IAAIT,KAAJ,CAAU,CAAV,CAAX;AAEAd,IAAAA,EAAE,CAACwB,YAAH,CAAgB,mBAAhB,EAAqC,OAArC,EACCT,KADD,CACO,IADP,EAECH,GAFD,CAEKa,IAAI,IAAI;AACTF,MAAAA,IAAI,CAACN,IAAL,CAAUQ,IAAI,CAACV,KAAL,CAAW,GAAX,CAAV;AACH,KAJD;AAMA,WAAOQ,IAAP;AACH;;AAnE4B;AAAZtB,W,CAMVK,I,GANUL,WAMmB,CAAKqB,OAAL,E","sourcesContent":["import * as fs from 'fs'\n\n/**\n * Clase para leer y escribir datos en los archivos de usuario.\n */\nexport default class DataManager {\n    /**\n     * Busca en el archivo un nombre de usuario concreto\n     * @param userName Nombre de usuario a encontrar\n     */\n\n    static data: Array<Array<string>> = this.loadAll();\n\n    /**\n     * Comprueba que una pareja de datos usuario-contrase침a exista\n     * y sea v치lida.\n     * @param user \n     * @param pwd \n     */\n    static checkCredentials(user: string, pwd: string) {\n        let valid = false\n        \n        this.data.forEach(u => {\n            if (u[0].toLowerCase() === user.toLowerCase() && \n            u[1] === pwd) {\n                valid = true\n                return\n            }\n        })\n\n        return valid\n    }\n\n    /**\n     * Devuelve un array con todos los amigos y sus estados.\n     * \n     * @param userName \n     */\n    static getFriends(userName: string) {\n        return this.data.map(user => {\n            // Si encontramos el usuario\n            if (user[0] === userName) {\n                // Extraemos sus amigos\n                let friends = Array(0)\n                user[3].split(',').map( friend => {\n                    this.data.map(u => {\n                        if (u[0].toLowerCase() === friend) {\n                            friends.push({name: friend, status: u[2]})\n                            return\n                        }\n                    })\n                })\n                return friends\n            }\n        }).filter(e => {\n            return e != null\n        })[0]\n    }\n\n    /**\n     * Carga todos los datos disponibles\n     */\n    static loadAll() {\n        let temp = new Array(0)\n\n        fs.readFileSync('../data/users.txt', 'utf-8')\n        .split(\"\\n\")\n        .map(line => {\n            temp.push(line.split(\";\"))\n        })\n\n        return temp\n    }\n\n}"]},"metadata":{},"sourceType":"module"}